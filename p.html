<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo de Select Dinámico en Múltiples Formularios</title>
    <style>
        .cont-new-user {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="cont-new-user">
        <hr class="division">
        <div class="cont-close-btn"><span class="eliminated-user">&times;</span></div>
        <label class="etiqueta-form">User</label>
        <select name="user" class="entrada user-select" required>
            <option value="1" class='option-s'>Manuel</option>
            <option value="2" class='option-s'>David</option>
        </select>
        <label class="etiqueta-form">Task responsibility</label>
        <input type="text" placeholder="Task responsibility" name="task-responsibility" class="entrada" required>
        <label class="etiqueta-form">Instructions</label>
        <textarea name="instructions" class="entrada text-area" required></textarea>
        <label class="etiqueta-form">Deadline</label>
        <input type="date" name="date-finish" class="entrada date-input" required>
    </div>

    <div class="cont-new-user">
        <hr class="division">
        <div class="cont-close-btn"><span class="eliminated-user">&times;</span></div>
        <label class="etiqueta-form">User</label>
        <select name="user" class="entrada user-select" required>
            <option value="1" class='option-s'>Manuel</option>
            <option value="2" class='option-s'>David</option>
        </select>
        <label class="etiqueta-form">Task responsibility</label>
        <input type="text" placeholder="Task responsibility" name="task-responsibility" class="entrada" required>
        <label class="etiqueta-form">Instructions</label>
        <textarea name="instructions" class="entrada text-area" required></textarea>
        <label class="etiqueta-form">Deadline</label>
        <input type="date" name="date-finish" class="entrada date-input" required>
    </div>

    <script>
        document.querySelectorAll('.user-select').forEach(select => {
            select.addEventListener('change', function() {
                updateOptions(this);
            });
        });

        function updateOptions(changedSelect) {
            const selectedValue = changedSelect.value;
            document.querySelectorAll('.user-select').forEach(select => {
                if (select !== changedSelect) {
                    for (let i = 0; i < select.options.length; i++) {
                        if (select.options[i].value === selectedValue) {
                            select.options[i].style.display = 'none';
                        } else {
                            select.options[i].style.display = 'block';
                        }
                    }

                    if (select.value === selectedValue) {
                        select.value = ''; // Resetea la selección si es igual a la del select cambiado
                    }
                }
            });
        }

        // Función para reiniciar las opciones visibles al cargar la página o agregar un nuevo formulario
        function resetOptions() {
            const selectedValues = Array.from(document.querySelectorAll('.user-select')).map(select => select.value);
            document.querySelectorAll('.user-select').forEach(select => {
                for (let i = 0; i < select.options.length; i++) {
                    if (selectedValues.includes(select.options[i].value) && select.options[i].value !== select.value) {
                        select.options[i].style.display = 'none';
                    } else {
                        select.options[i].style.display = 'block';
                    }
                }
            });
        }

        // Llamar a la función al cargar la página
        window.addEventListener('load', resetOptions);
    </script>
</body>
</html>
